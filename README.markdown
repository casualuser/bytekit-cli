bytekit-cli
===========

[Bytekit](http://www.bytekit.org/) is a PHP extension that provides userspace
access to the opcodes generated by PHP's compiler.

**bytekit-cli** is a command-line tool that leverages Bytekit to perform common
code analysis tasks.

Usage Examples
--------------

Disassemble a source file:

    sb@ubuntu bytekit-cli % bytekit bytekit.php 
    bytekit-cli 1.0.0 by Sebastian Bergmann.

    main:

      line  #     opcode                           operands
      -----------------------------------------------------------------------------
      2     0     EXT_STMT                         
            1     ECHO                             '#!/usr/bin/env php\n'
      45    2     EXT_STMT                         
            3     EXT_FCALL_BEGIN                  
            4     SEND_VAL                         '@php_bin@', 1
            5     SEND_VAL                         '@php_bin', 2
            6     DO_FCALL                         $0, 'strpos'
            7     EXT_FCALL_END                    
            8     IS_IDENTICAL                     ~1, $0, 0
            9     JMPZ                             ~1, loc_419
      46    10    EXT_STMT                         
            11    EXT_FCALL_BEGIN                  
            12    EXT_FCALL_BEGIN                  
            13    SEND_VAL                         '/usr/local/src/bytekit-cli/bytekit.php', 1
            14    DO_FCALL                         $2, 'dirname'
            15    EXT_FCALL_END                    
            16    CONCAT                           ~3, $2, ':'
            17    EXT_FCALL_BEGIN                  
            18    DO_FCALL                         $4, 'get_include_path'
            19    EXT_FCALL_END                    
            20    CONCAT                           ~5, ~3, $4
            21    SEND_VAL                         ~5, 1
            22    DO_FCALL                         'set_include_path'
            23    EXT_FCALL_END                    
      47    24    JMP                              loc_419
      49    25    EXT_STMT                         
            26    EXT_FCALL_BEGIN                  
            27    REQUIRE                          'Bytekit/TextUI/Command.php'
            28    EXT_FCALL_END                    
      51    29    EXT_STMT                         
            30    INIT_STATIC_METHOD_CALL          'Bytekit_TextUI_Command', 'main'
            31    EXT_FCALL_BEGIN                  
            32    DO_FCALL_BY_NAME                 
            33    EXT_FCALL_END                    
      52    34    RETURN                           1

Scan for unwanted mnemonics in a source tree:

    sb@ubuntu ~ % bytekit --scan EVAL /usr/local/src/phpunit/trunk 
    bytekit-cli 1.0.0 by Sebastian Bergmann.

      - /usr/local/src/phpunit/trunk/PHPUnit/Extensions/PhptTestCase.php:223 (EVAL)
      - /usr/local/src/phpunit/trunk/PHPUnit/TextUI/Command.php:177 (EVAL)
      - /usr/local/src/phpunit/trunk/PHPUnit/Framework/TestCase.php:1158 (EVAL)
      - /usr/local/src/phpunit/trunk/PHPUnit/Framework/TestCase.php:1059 (EVAL)

